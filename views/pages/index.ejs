<!DOCTYPE html>
<html>
  <head>
    <% include ../partials/secondheader.ejs %>
  </head>

  <body>
    <style>



.box {
  width: 40%;
  margin: 0 auto;
  background: rgba(255,255,255,0.2);
  padding: 35px;
  border: 2px solid #fff;
  border-radius: 20px/50px;
  background-clip: padding-box;
  text-align: center;
}

.button {
  font-size: 1em;
  padding: 10px;
  color: #fff;
  border: 2px solid #06D85F;
  border-radius: 20px/50px;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.3s ease-out;
}
.button:hover {
  background: #06D85F;
}

.overlay {
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.7);
  transition: opacity 500ms;
  visibility: hidden;
  opacity: 0;
}
.overlay:target {
  visibility: visible;
  opacity: 1;
}

.overlay.visible {
  visibility: visible;
  opacity: 1;
}

.popup {
  margin: 70px auto;
  padding: 20px;
  background: #fff;
  border-radius: 5px;
  width: 30%;
  position: relative;
  transition: all 5s ease-in-out;
}

.popup h2 {
  margin-top: 0;
  color: #333;
  font-family: Tahoma, Arial, sans-serif;
}
.popup .close {
  position: absolute;
  top: 20px;
  right: 30px;
  transition: all 200ms;
  font-size: 30px;
  font-weight: bold;
  text-decoration: none;
  color: #333;
}
.popup .close:hover {
  color: #06D85F;
}
.popup .content {
  max-height: 30%;
  overflow: auto;
}

@media screen and (max-width: 700px){
  .box{
    width: 70%;
  }
  .popup{
    width: 70%;
  }
}
    </style>
    

    <div class="timer-wrapper">
      <!-- Header -->
      <header id="header" class="entry">
        <a href="/">
          <div class="mug-coffee">
            <div class="smoke-container">
              <svg width="45px" height="39px" viewbox="0 0 31 73">
                <g
                  stroke="none"
                  stroke-width="1"
                  fill="none"
                  fill-rule="evenodd"
                >
                  <g
                    class="smokes"
                    transform="translate(2.000000, 2.000000)"
                    stroke="#BEBEBE"
                    stroke-width="5"
                  >
                    <g class="smoke-1">
                      <path
                        id="Shape1"
                        d="M0.5,8.8817842e-16 C0.5,8.8817842e-16 3.5,5.875 3.5,11.75 C3.5,17.625 0.5,17.625 0.5,23.5 C0.5,29.375 3.5,29.375 3.5,35.25 C3.5,41.125 0.5,41.125 0.5,47"
                      ></path>
                    </g>
                    <g class="smoke-2">
                      <path
                        id="Shape2"
                        d="M0.5,8.8817842e-16 C0.5,8.8817842e-16 3.5,5.875 3.5,11.75 C3.5,17.625 0.5,17.625 0.5,23.5 C0.5,29.375 3.5,29.375 3.5,35.25 C3.5,41.125 0.5,41.125 0.5,47"
                      ></path>
                    </g>
                    <g class="smoke-3">
                      <path
                        id="Shape3"
                        d="M0.5,8.8817842e-16 C0.5,8.8817842e-16 3.5,5.875 3.5,11.75 C3.5,17.625 0.5,17.625 0.5,23.5 C0.5,29.375 3.5,29.375 3.5,35.25 C3.5,41.125 0.5,41.125 0.5,47"
                      ></path>
                    </g>
                  </g>
                </g>
              </svg>
            </div>
            <svg
              class="mymug"
              width="50px"
              height="50px"
              viewBox="0 0 534 534"
              preserveAspectRatio="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M430.417 210.417v102.916c0 30.834-25 56.25-56.25 56.25H140.833c-30.833 0-55.833-25-55.833-56.25V210.417c0 86.25 345.417-76.25 345.417 0z"
                fill="#dbdbdd"
              />
              <path
                d="M140.833 388.333h233.334c41.25 0 74.583-33.333 74.583-75 51.667 0 84.167-46.25 84.167-102.916 0-56.667-32.5-75-84.167-75V107.5H66.25v205.833c0 41.25 33.333 75 74.583 75zM449.167 163.75c36.25 0 55.833 5.417 55.833 46.667s-20 75-55.833 75V163.75zm-355-27.917h326.666V313.75c0 30.833-15.833 46.667-46.666 46.667H140.833c-30.833 0-46.666-15.834-46.666-46.667V135.833zM486.25 397.5H19.583a18.672 18.672 0 00-18.75 18.75c0 10.417 8.334 9.167 18.75 9.167h467.084c10.416 0 18.75.833 18.75-9.167-.417-10.417-8.75-18.75-19.167-18.75z"
                fill="#fff"
                fill-rule="nonzero"
                stroke="#575757"
                stroke-width=".63"
              />
            </svg>
            <!--  <img
                class="mymug"
                src="assets/css/images/coffeewhite.svg"
                alt="coffee"
			  /> -->
          </div>
          <h1>PomoProgress</h1>
        </a>
<h1 id = "localTime"></h1>
        <nav>
          <a href="#menu">Menu</a>
        </nav>
      </header>

      <!-- Menu -->
      <nav id="menu">
        <div class="inner">
          <h2>Menu</h2>
          <ul class="links">
            <li><a href="/">Timer</a></li>
            <li><a href="/archive">Archive</a></li>
            <li><a href="/settings">Settings</a></li>
            <li><a href="#">Log In</a></li>
            <li><a href="#">Sign Up</a></li>
          </ul>
          <a href="#" class="close">Close</a>
        </div>
      </nav>

      <div>
        <audio id="myAudio" src="notification.mp3" preload="auto">
          
          
          
        </audio>  
        <div id="pomodoro-container">
             
            <div id="pomodoro-clock">
                <div id="pomodoro-timer"></div>
                <div>
                  <input type="text" id="pomodoro-clock-task" placeholder="Enter your task..." />
                </div>
               
<div id="pomodoro-clock-actions">
<div class='o-play-btn'>
</div>


<div>
<button id="pomodoro-stop" type="submit" class="hidden stop" value="clicked">
  <svg
xmlns="http://www.w3.org/2000/svg"
x="0px"
y="0px"
viewBox="0 0 400 400"
>
<g class="icon icon-stop">
<circle
class="icon-border"
stroke-miterlimit="10"
cx="200"
cy="200"
r="198"
></circle>
<rect
class="icon-actual"
x="120"
y="120"
stroke-miterlimit="10"
width="160"
height="160"
></rect>
</g>
</svg>
</button>
</div>

</div>
<div class="sandbox">
 
  
  <div id="popup1" class="overlay">
    <div class="popup">
      <h2>Times Up!</h2>
      <form id ="rumiForm" action="/tomatos" method="POST" style="color: black;">

        <div>
        <button id="continue" type="submit" class="sendPostRequest" value="clicked">Continue
        </button>
        <button id="break" type="submit" class="sendPostRequest" value="clicked">Take 5
        </button>
        <a id="close-popup1" href = "#" class=" close" >&times;</a>
        </div>
        </form>
     
      
      <div class="content">
        Thank to pop me out of that button, but now i'm done so you can close this window.
      </div>
    </div>
  </div>
  <div id="popup2" class="overlay">
    <div class="popup">
      <h2>Your Break is Over!</h2>
     

        <div>
        <button id="backtowork" type="button"  value="clicked">Back to Work
        </button>
      
        </div>
        
     
      <a id= "close-popup2" class="close" >&times;</a>
      <div class="content">
        Thank to pop me out of that button, but now i'm done so you can close this window.
      </div>
    </div>
  </div>
  
  <!-- Button trigger modal -->



</div>
                <!-- new -->
                <div id="pomodoro-clock-title">
                  
                </div>
                <div id="pomodoro-clock-actions">
                  <div class="pomodoro-input">
                    <label>Work Duration</label>
                    <input name="input-work-duration" id="input-work-duration" type="number" />
                  </div>
                  <div class="pomodoro-input">
                    <label>Break Duration</label>
                    <input name="input-break-duration" id="input-break-duration" type="number" />
                  </div>
                </div>
                <div id = "work-session-status">
                  <p class="time-left">
    
                  </p> <br>
                  
                </div>
                <div id="pomodoro-info">
                  
                  <ul class = "tomatos-block" id="pomodoro-sessions">
      
                    
      
                   
                  </ul>
                  <form action="/deleteAll" method="POST">
                    
                    <div id ="slide-in" class="box hide">
                      <button class="dlt-button touch delete" id="myButton" type="submit"  value="clicked">
                        
                      </button>
                    </div>
                  </form>
                </div>
                
              <div>
    
                
    <div>
    
    <ul class="tomatos">
      <% for ( let tomato of tomatos ) { %>
        <li class="tomato">
          <span><%= tomato.name %>
          <span><%= tomato.month %>
            <span id="date"><%= tomato.date %>
        </li>
      <% } %>
    
    </ul>
    </div>
    
    
      
      
</div>
</div>



</div>
</div>
    
   

         <!-- <div class='test'><img src='./half-tomato-png.png' alt='test'></div> --> 
        
      <script>
        
        function submitRumiForm(e) {
         let x = document.getElementById("work-session-status");
        let z = x.innerText;
         

          if (z == null){
            console.log("its null")
          }
         else if (parseInt(z) > 5 ) {
            console.log(`z --time-left = ${z}`) ;
      e.preventDefault();
   var formData = new FormData(document.getElementById("rumiForm"));
   var options = {body: formData, method: "POST"}
   fetch("/tomatos", options).then(function(response) {
       return response.json();
   }).then(function(data) {
       // have the JSON response from the POST operation here
       console.log(data);
   }).catch(function(err) {
       console.log(err);
   })
  }
  else{e.preventDefault();}
 //else {console.log("no... less than 5")}
};

  
  
  

document.getElementById("continue").addEventListener("click", submitRumiForm);
document.getElementById("break").addEventListener("click", submitRumiForm);
document.getElementById("close-popup1").addEventListener("click", submitRumiForm);




$('.o-play-btn').on('click', function(){
    $('#slide-in').addClass('show');
});

$("#pomodoro-stop").on("click", function (e) {
        if ($(this).hasClass("active")) {
          $(this).removeClass("active");
        } else {
          $("button").removeClass("active");
          $(this).addClass("active");
        }
      });
     
//document.getElementById("myButton").addEventListener("click", submitRumiForm);
      </script>
       <% include ../partials/footer.ejs %>
  </body>
</html>
